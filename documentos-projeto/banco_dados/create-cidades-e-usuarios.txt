CREATE TABLE tb_cidades (
  codcid INT PRIMARY KEY,
  nomecid VARCHAR(50) NOT NULL,
 estadocid VARCHAR(2) CHECK (estado IN ('PR','RS','SC'))
);

CREATE TABLE tb_usuarios (
  cod_cliente INT PRIMARY KEY,
  nome_cliente VARCHAR(70) NOT NULL,
  cpf BIGINT NOT NULL UNIQUE,
  datanasc DATE CHECK ((date_part('year',current_date) - date_part('year',datanasc) <= 100) AND (date_part('year',current_date) - date_part('year',datanasc) > 17)),
  telefone_cliente BIGINT NOT NULL,
  email_cliente VARCHAR(80) NOT NULL UNIQUE,
  senha VARCHAR(50) NOT NULL,
  complemento VARCHAR(20) NOT NULL,
  rua VARCHAR(50) NOT NULL,
  bairro VARCHAR(50) NOT NULL,
  numero_casa INT NOT NULL,
  tipo_cadastro CHAR(1) CHECK(tipo_cadastro IN ("C", "A")),
  codcid_fk INT FOREIGN KEY,
  CONSTRAINT u_person UNIQUE(cpf, email_cliente),
  CONSTRAINT fk_cidade FOREIGN KEY(codcid_fk) REFERENCES tb_cidades(codcid)
);